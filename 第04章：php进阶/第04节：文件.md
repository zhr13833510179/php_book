# 第04节:文件
上一节我们介绍了包含语句中的语法及区别，本节讲的是文件处理的定义规则及文件打开关闭的方法和读取文件信息的多种方式

### 一、学习目标
如何在php中打开或关闭文件，以及他们的定义规则与书写方式，怎么通过函数来读写文件的多种方法

### 二、PHP 文件处理
#### 1.打开文件
fopen() 函数用于在 PHP 中打开文件。

此函数的第一个参数含有要打开的文件的名称，第二个参数规定了使用哪种模式来打开文件

实例如下所示:

``` php
<html>
<body>

<?php
$file=fopen("welcome.txt","r+");
?>

</body>
</html>
```

通过fopen()这个个函数来打开welcome.txt这个文件，"r+"是使用的读写模式，接下来我们讲介绍打开文件的多种模式

文件可能通过下列模式来打开：

|模式|描述|
|---|---|
|r|只读。在文件的开头开始。|
|r+|读/写。在文件的开头开始。|
|w|只写。打开并清空文件的内容；如果文件不存在，则创建新文件。|
|w+|读/写。打开并清空文件的内容；如果文件不存在，则创建新文件。|
|a|追加。打开并向文件末尾进行写操作，如果文件不存在，则创建新文件。|
|a+|读/追加。通过向文件末尾写内容，来保持文件内容。|
|x|只写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。|
|x+|读/写。创建新文件。如果文件已存在，则返回 FALSE 和一个错误。|

提示：如果 fopen() 函数无法打开指定文件，则返回 0 (false)。

如果 fopen() 函数不能打开指定的文件，下面的实例会生成一段消息：

实例如下所示:

``` php
<html>
<body>

<?php
    $file=fopen("welcome.txt","r") or exit("Unable to open file!");
?>

</body>
</html>
```
通过fopen()这个函数来打开welcome.txt文件如果出现找不到文件或未知错误不能打开文件，则输出报错信息和"Unable to open file!"

#### 2.关闭文件
fclose() 函数用于关闭打开的文件：

实例如下所示:

``` php
<?php
$file = fopen("welcome.txt","r");

//执行一些代码

fclose($file);
?>
```


#### 3.检测文件末尾（EOF）
feof() 函数检测是否已到达文件末尾（EOF）。

在循环遍历未知长度的数据时，feof() 函数很有用。

实例代码如下：

``` php
if (feof($file)) echo "文件结尾";
```
通过feof()这个函数判断$file变量中存储的文件是否已经读取到文件末尾成功则输出"文件结尾"

#### 4.逐行读取文件
fgets() 函数用于从文件中逐行读取文件。

提示：在调用该函数之后，文件指针会移动到下一行。

实例如下所示:
下面的实例逐行读取文件，直到文件末尾为止：

``` php
<?php
$file = fopen("welcome.txt", "r") or exit("无法打开文件!");
// 读取文件每一行，直到文件结尾
while(!feof($file))
{
    echo fgets($file). "<br>";
}
fclose($file);
?>
```
提示：通过feof()函数判断是否读取文件到末尾要取非

#### 5.逐字符读取文件
fgetc() 函数用于从文件中逐字符地读取文件。

注释：在调用该函数之后，文件指针会移动到下一个字符。

实例如下所示:
下面的实例逐字符地读取文件，直到文件末尾为止：

``` php
<?php
$file=fopen("welcome.txt","r") or exit("无法打开文件!");
while (!feof($file))
{
    echo fgetc($file);
}
fclose($file);
?>
```

本节我们学习了php处理文件的方式：打开、关闭文件以及文件的处理模式，如何应用三种读取文件的方法

### 三、作业
1.熟练运用文件处理的多种方法及各自之间的作用
2.手动书写案例代码，加深对文件处理的整体印象
3.手动创建一个test.txt文件，打开文件并通过逐字符读取文件的方式输出在页面上，内容为：[test.txt文件地址](https://github.com/xiaozhoulee/php_example/blob/master/%E7%AC%AC04%E7%AB%A0%EF%BC%9Aphp%E8%BF%9B%E9%98%B6/%E7%AC%AC04%E8%8A%82%EF%BC%9A%E6%96%87%E4%BB%B6/test.txt)