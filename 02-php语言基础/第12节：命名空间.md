# 命名空间
本章节主要讲php当中的命名空间(namespace)的定义及使用

### 使用命名空间基础
PHP 命名空间类似于文件系统

#### 在文件系统中访问一个文件有三种方式：
* 1、相对文件名形式如foo.txt。它会被解析为 currentdirectory/foo.txt，其中 currentdirectory 表示当前目录。因此如果当前目录是 /home/foo，则该文件名被解析为/home/foo/foo.txt。
* 2、相对路径名形式如subdirectory/foo.txt。它会被解析为 currentdirectory/subdirectory/foo.txt。
* 3、绝对路径名形式如/main/foo.txt。它会被解析为/main/foo.txt。

#### PHP 命名空间中的元素使用同样的原理。例如，类名可以通过三种方式引用：

* 1、<font color="#dd0000">非限定名称，或不包含前缀的类名称</font>，例如 $a=new foo(); 或 foo::staticmethod();。如果当前命名空间是 currentnamespace，foo 将被解析为currentnamespace\foo。如果使用 foo 的代码是全局的，不包含在任何命名空间中的代码，则 foo 会被解析为foo。 警告：如果命名空间中的函数或常量未定义，则该非限定的函数名称或常量名称会被解析为全局函数名称或常量名称。
* 2、<font color="#dd0000">限定名称,或包含前缀的名称</font>，例如 $a = new subnamespace\foo(); 或 subnamespace\foo::staticmethod();。如果当前的命名空间是currentnamespace，则 foo 会被解析为 currentnamespace\subnamespace\foo。如果使用 foo 的代码是全局的，不包含在任何命名空间中的代码，foo 会被解析为subnamespace\foo。
* 3、<font color="#dd0000">完全限定名称</font>，或包含了全局前缀操作符的名称，例如， $a = new \currentnamespace\foo(); 或 \currentnamespace\foo::staticmethod();。在这种情况下，foo 总是被解析为代码中的文字名(literal name)currentnamespace\foo。

### 定义命名空间
虽然任意合法的PHP代码都可以包含在命名空间中，但只有以下类型的代码受命名空间的影响，

它们是：

* 类（包括抽象类和traits）
* 接口
* 函数
* 常量

命名空间通过关键字 namespace 来声明。如果一个文件中包含命名空间，它必须在其它所有代码之前声明命名空间，除了一个以外：declare关键字。

``` php
<html>
<?php
namespace MyProject; // 致命错误 -　命名空间必须是程序脚本的第一条语句
?>
```

#### 声明单个命名空间

``` php
<?php
namespace MyProject;

const CONNECT_OK = 1;
class Connection { /* ... */ }
function connect() { /* ... */  }

?>
```

### 在同一个文件中定义多个命名空间
定义多个命名空间，推荐用大括号语法

``` php
<?php
namespace MyProject {
　　const CONNECT_OK = 1;
　　class Connection { /* ... */ }
　　function connect() { /* ... */  }
}

namespace AnotherProject {
　　const CONNECT_OK = 1;
　　class Connection { /* ... */ }
　　function connect() { /* ... */  }
}
?>
```

在实际的编程实践中，非常不提倡在同一个文件中定义多个命名空间。这种方式的主要用于将多个 PHP 脚本合并在同一个文件中。

将全局的非命名空间中的代码与命名空间中的代码组合在一起，只能使用大括号形式的语法。全局代码必须用一个不带名称的 namespace 语句加上大括号括起来，例如：

``` php
<?php
declare(encoding='UTF-8');
namespace MyProject {

const CONNECT_OK = 1;
class Connection { /* ... */ }
function connect() { /* ... */  }
}

namespace { // 全局代码
session_start();
$a = MyProject\connect();
echo MyProject\Connection::start();
}
?>
```

### namespace关键字和__NAMESPACE__常量
常量__NAMESPACE__的值是包含当前命名空间名称的字符串。

如果不包括在任何命名空间中的代码，则为一个空的字符串。

``` php
<?php
namespace MyProject;
echo '"', __NAMESPACE__, '"'; // 输出 "MyProject"
?>

<?php
echo '"', __NAMESPACE__, '"'; // 输出 "MyProject"
?>
```